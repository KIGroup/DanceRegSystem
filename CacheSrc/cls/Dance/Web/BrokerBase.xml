<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="Dance.Web.BrokerBase">
<Super>%CSP.REST</Super>
<TimeCreated>63289,63449.225817</TimeCreated>

<UDLText name="T">
<Content><![CDATA[
// Parameter UseSession As Integer = 1;

]]></Content>
</UDLText>

<Method name="DispatchRequest">
<Description>
Dispatch a REST request according to URL and Method</Description>
<ClassMethod>1</ClassMethod>
<FormalSpec>pUrl:%String,pMethod:%String,pForwarded:%Boolean=0</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
    set lang = $CASE(%request.CgiEnvs("HTTP_ACCEPT_LANGUAGE"), 
    "en":"en", 
    "de":"de",
    "it":"it", 
    :"ru")
    
    do ##class(%MessageDictionary).SetSessionLanguage(lang)
    set %session.Language = lang
    
    quit ##super(pUrl, pMethod, pForwarded)
]]></Implementation>
</Method>
</Class>
</Export>
